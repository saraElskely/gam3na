/*
 FusionCharts JavaScript Library
 Copyright FusionCharts Technologies LLP
 License Information at <http://www.fusioncharts.com/license>

 @version 3.12.0
 FusionCharts JavaScript Library MSStackedCombiDY2D Chart
 Copyright FusionCharts Technologies LLP
 License Information at <http://www.fusioncharts.com/license>

 @version 3.12.0
*/
(function(H){"object"===typeof module&&"undefined"!==typeof module.exports?module.exports=H:H(FusionCharts)})(function(H){H.register("module",["private","modules.renderer.js-msstepline",function(){var g=this.hcLib,c=this.window,A=!g.CREDIT_REGEX.test(c.location.hostname),l=g.chartAPI,I=g.pluckNumber,O=g.pluck,ma=c.Image,c=g.preDefStr,P=g.schedular,E=c.line,F=g.toRaphaelColor,Q=g.getFirstValue,Ja=c.configStr,Ka=c.animationObjStr,w=c.dataLabelStr,na=g.BLANKSTRING,m=c.hiddenStr,T=Math.max,U=g.TOUCH_THRESHOLD_PIXELS,
oa=g.CLICK_THRESHOLD_PIXELS,La=g.hasTouch?U:oa,x=c.ROUND,d=c.miterStr;l("msstepline",{friendlyName:"Multi-series Step Line Chart",standaloneInit:!0,creditLabel:A,defaultDatasetType:"msstepline",defaultPlotShadow:1,applicableDSList:{msstepline:!0}},l.mscartesian,{drawverticaljoins:1,useforwardsteps:1,zeroplanethickness:1,zeroplanealpha:40,showzeroplaneontop:0,enablemousetracking:!0},l.areabase);H.register("component",["dataset","MSStepLine",{type:"stepline",_addLegend:function(){var a=this.config,
d=this.chart.components.legend,m=I(a.drawanchors,1),a={enabled:a.includeinlegend,type:E,drawLine:O(a.drawLine,!0),fillColor:F({color:a.anchorbgcolor,alpha:a.anchorbgalpha}),strokeColor:F({color:a.anchorbordercolor,alpha:"100"}),rawFillColor:a.anchorbgcolor,rawStrokeColor:a.anchorbordercolor,anchorSide:m?a.anchorsides:0,strokeWidth:a.anchorborderthickness,label:Q(this.JSONData.seriesname),lineWidth:a.linethickness};this.legendItemId=d.addItems(this,this.legendInteractivity,a)},draw:function(){var a=
this,c=a.JSONData,y=a.chart,l=y.getJobList(),Q=y.components,t=a.config,H=a.index||a.positionIndex,z=y.config,A,h,B=Q.paper,S=Q.xAxis[0],L=a.yAxis,n,e,M=y.graphics;A=M.datalabelsGroup;var D,p,N,J,u,I,fa=a.components.data,v,U=a.components.removeDataArr||[],oa=U.length,ga=t.linethickness,f=a.graphics.container,Oa=z.connectnulldata,G=M.datasetGroup,q,M=t.shadow,C,K=a.graphics.dataLabelContainer,b={},Da,k,b=y.get(Ja,Ka),ha=b.dummyObj,ia=b.animObj,W=b.duration,qa=a.components.pool||[],ra=function(){!1!==
a.visible||!1!==a._conatinerHidden&&void 0!==a._conatinerHidden||(f.lineGroup.hide(),f.lineShadowGroup.hide(),f.anchorShadowGroup.hide(),f.anchorGroup.hide(),K&&K.hide(),a._conatinerHidden=!0)},Pa=function(){G.lineConnector.attr({"clip-rect":null});G.lineConnector.node&&G.lineConnector.node.removeAttribute("clip-path");!1!==a.visible&&(f.lineShadowGroup.show(),f.anchorShadowGroup.show(),f.anchorGroup.show(),K&&K.show())},X=!0,sa,ta=L.getAxisBase(),ta=L.yBasePos=L.getAxisPosition(ta),ja=Q.canvas.config.clip,
Q=ja["clip-canvas-init"].slice(0),ja=ja["clip-canvas"].slice(0),ua=t.lineDashStyle,va={color:t.linecolor,alpha:t.alpha},wa,xa,ba,Y,r=[],Ea=0,Z=[],ka=null,ya,ca=[],za=!1,Fa,la=a.graphics.lineElement,aa=a.visible,Ga=t.drawverticaljoins,Qa=t.useforwardsteps,da,Aa=b.animType,Ba=0,ea,y=y.config.stepatmiddle?.5*S.getPVR():0,Ca,Ha=z.canvasTop,Ia=z.canvasBottom;t.imagesLoaded=0;G.lineConnector=G.lineConnector||B.group("line-connector",G);f||(f=a.graphics.container={lineShadowGroup:B.group("connector-shadow",
G.lineConnector),anchorShadowGroup:B.group("anchor-shadow",G.lineConnector),lineGroup:B.group(E,G.lineConnector),anchorGroup:B.group("anchors",G.lineConnector)},aa||(f.lineShadowGroup.hide(),f.anchorShadowGroup.hide(),f.lineGroup.hide(),f.anchorGroup.hide()));fa||(fa=a.components.data=[]);K||(K=a.graphics.dataLabelContainer=a.graphics.dataLabelContainer||B.group(w,A),aa||K.hide());aa&&(f.lineShadowGroup.show(),f.anchorShadowGroup.show(),f.lineGroup.show(),f.anchorGroup.show(),K.show());A=S.getCategoryLen();
for(h=0;h<A;h++)if(v=fa[h])k=v.config,J=k.setValue,N=k.setLink,u=k.setLevelTooltext,b=k.anchorProps,Da=b.symbol,C=b.shadow,I=k.displayValue,p=v.graphics.element,da=v.graphics.image,n=v.graphics.hotElement,e=v.graphics.label,v||(v=fa[h]={graphics:{}}),null===J?(ca.length=0,Oa||(ka=null),p&&p.hide(),da&&da.hide(),e&&e.hide(),n&&n.hide()):(Y={color:k.color,alpha:k.alpha},sa=k.dashStyle,n=S.getAxisPosition(h),e=!a.visible&&W?ta:L.getAxisPosition(J),q=k.hoverEffects,b.isAnchorHoverRadius=q.anchorRadius,
D=b.radius,Ca=b.borderThickness,ea=e-D-Ca/2,D=e+D+Ca/2,ea<Ha&&(z.toleranceTop=T(z.toleranceTop||0,Ha-ea)),D>Ia&&(z.toleranceBottom=T(z.toleranceBottom||0,D-Ia)),ea=S.getLabel(h),D=z.showtooltip?k.toolText+(u?na:k.toolTipValue):na,k.finalTooltext=D,u=k.eventArgs||(k.eventArgs={}),u.index=h,u.link=N,u.value=J,u.displayValue=I,u.categoryLabel=ea,u.toolText=D,u.id=t.userID,u.datasetIndex=H,u.datasetName=c.seriesname,u.visible=aa,b.imageUrl?(k.anchorImageLoaded=!1,v._xPos=n,v._yPos=e,C=new ma,C.onload=
this._onAnchorImageLoad(a,h,u,n,e),C.onerror=this._onErrorSetter(a,h),C.src=b.imageUrl,Ba++):(da&&da.hide(),J=[Da[1]||2,n,e,b.radius,b.startAngle,b.dip],N={fill:F({color:b.bgColor,alpha:b.bgAlpha}),stroke:F({color:b.borderColor,alpha:b.borderAlpha}),"stroke-width":b.borderThickness,visibility:b.radius?aa:m},p||(qa.element&&qa.element.length?p=v.graphics.element=qa.element.shift():(p=v.graphics.element=B.polypath(f.anchorGroup),p.attr({polypath:J}))),p.show().animateWith(ha,ia,{polypath:J},W,Aa,X&&
ra),p.attr(N).shadow(C,f.anchorShadowGroup).data("hoverEnabled",q.enabled).data("eventArgs",u),X=!1),C=v.graphics.connector,q.enabled&&(J={polypath:[q.anchorSides||2,n,e,q.anchorRadius,q.startAngle,q.dip],fill:F({color:q.anchorColor,alpha:q.anchorBgAlpha}),stroke:F({color:q.anchorBorderColor,alpha:q.anchorBorderAlpha}),"stroke-width":q.anchorBorderThickness},N={polypath:[b.sides,n,e,b.radius,b.startAngle,0],fill:F({color:b.bgColor,alpha:b.bgAlpha}),stroke:F({color:b.borderColor,alpha:b.borderAlpha}),
"stroke-width":b.borderThickness},p&&p.data("anchorRadius",b.radius).data("anchorHoverRadius",q.anchorRadius).data("hoverEnabled",q.enabled).data("setRolloverAttr",J).data("setRolloutAttr",N).data("eventArgs",u)),k.trackerConfig||(k.trackerConfig={}),k.trackerConfig.trackerRadius=T(b.radius,q&&q.anchorRadius||0,La)+(b.borderThickness||0)/2,ba=ba!==[F(Y||va),sa||ua].join(":"),null!==ka?(ca.length&&(r=r.concat(ca),ca.length=0),r.join(na)||r.push("M",ya,ka),Qa?(r.push("H",n-y),Ga?r.push("V",e):r.push("M",
n-y,e),y&&r.push("H",n)):(Ga?r.push("V",e):r.push("M",ya,e),r.push("H",n)),ba&&(Ea?Z=Z.concat(r):(C||(C=v.graphics.connector=B.path(r,f.lineGroup),za=!0),C.animateWith(ha,ia,{path:r},W,Aa,X&&ra),C.attr({"stroke-dasharray":xa,"stroke-width":ga,stroke:wa,"stroke-linecap":x,"stroke-linejoin":2<ga?x:d}).shadow(Fa,f.lineShadowGroup),X=!1),r=[]),ba||C&&C.hide()):ca.push("M",n,e),ya=n,ka=e,wa=F(Y||va),Fa=Y?{opacity:Y&&Y.alpha/100}:M,xa=sa||ua,Ea=void 0===O(k.color,k.alpha,k.dashed)?1:0,ba=[wa,xa].join(":"),
v._xPos=n,v._yPos=e,!b.imageUrl&&this.drawLabel(h));t.noOfImages=t.totalImages=Ba;0===Ba&&l.labelDrawID.push(P.addJob(a.drawLabel,a,[],g.priorityList.label));r.length&&(Z=Z.concat(r));c={path:Z};N={"stroke-dasharray":ua,"stroke-width":ga,stroke:F(va),"stroke-linecap":x,"stroke-linejoin":2<=ga?x:d};la||(la=a.graphics.lineElement=B.path({path:Z},f.lineGroup),za=!0);la.show().animateWith(ha,ia,c,W,Aa,X&&ra);la.attr(N).shadow(M,f.lineShadowGroup);X=!1;W&&aa&&za&&(f.anchorGroup.hide(),f.lineShadowGroup.hide(),
f.anchorShadowGroup.hide(),K.hide(),G.lineConnector.attr({"clip-rect":Q}).animateWith(ha,ia,{"clip-rect":ja},W,"normal",Pa));for(h=0;h<oa;h++)a._removeDataVisuals(U.shift());a.drawn=!0}},E,{drawverticaljoins:void 0,useforwardsteps:void 0}])}]);H.register("module",["private","modules.renderer.js-msstackedcombidy2d",function(){var g=this,c=g.window,A=g.hcLib,l=A.chartAPI,I=A.moduleCmdQueue,O=A.injectModuleDependency,ma=A.pluck,P,E;E={friendlyName:"Multi-series Dual Y-Axis Stacked Combination Chart",
creditLabel:!A.CREDIT_REGEX.test(c.location.hostname),defaultDatasetType:"column",applicableDSList:{line:!0,area:!0,column:!0,column3d:!0,msstepline:!0},_createDatasets:function(){var g=this.components,c=this.jsonData,l=c.dataset,E=l&&l.length,w,I,m,T=this.defaultDatasetType,U=this.applicableDSList,P=this.components.legend,O=g.xAxis[0],x,d,a,R,y,V,Ma=[],t={},pa=this.config,z,Na=this.config.catLen,h,B,S,L=0,n=pa.datasetMap||(pa.datasetMap={line:[],area:[],column:[],column3d:[],msstepline:[]}),e,M=
{line:[],area:[],column:[],column3d:[],msstepline:[]},D={},p;l||this.setChartMessage();this.config.categories=c.categories&&c.categories[0].category;I=g.dataset=[];for(c=0;c<E;c++)for(p=l[c],d=(d=ma(p.renderas,T))&&d.toLowerCase(),"stepline"===d||"line"===d&&Number(p.drawinstepmode)?d="msstepline":"spline"===d&&(d="line"),U[d]||(d=T),a=H.get("component",["dataset",d]),B=p.dataset&&p.dataset.length,void 0===t[d]?t[d]=0:t[d]++,m="datasetGroup_"+d,w=H.register("component",["datasetGroup",d]),(x=g[m])&&
Ma.push(x),e=n[d],w&&!x?(x=g[m]=new w,x.chart=this,x.init()):x&&!D[d]&&x.init(),D[d]=!0,w=0,S=B||1;w<S;w++)m=e[0],B?(R=p.dataset[w],R.parentyaxis=p.parentyaxis):R=p,a&&(m?(z=O.getCategoryLen(),h=Na-z,V=m.JSONData,y=V.data&&V.data.length,V=R.data&&R.data.length||0,y-=V,h=this._getDiff(y,V,h,z),z=h.diff,h=h.startIndex,0<z&&m.removeData(h,z,!1),m.JSONData=R,m.index=L,m.configure(),e.splice(0,1)):(m=new a,m.chart=this,m.index=L,m.init(R)),x&&x.addDataSet(m,t[d],w),M[d].push(m),I.push(m),L++);for(l in n)for(e=
n[l],E=e.length,w=0;w<E;w++)P.removeItem(e[w].legendItemId),A.componentDispose.call(e[w]);pa.datasetMap=M;this.config.catLen=O.getCategoryLen()}};P={hasLineSet:0,isstacked:!0,isdual:!0,drawverticaljoins:1,useforwardsteps:1,zeroplanethickness:1,zeroplanealpha:40,showzeroplaneontop:0,stepatmiddle:1};l.msdybasecartesian?l("msstackedcombidy2d",E,l.msdybasecartesian,P,l.areabase):(O("charts","msstackedcombidy2d",1),I.charts.unshift({cmd:"_call",obj:c,args:[function(){l.msdybasecartesian?l("msstackedcombidy2d",
E,l.msdybasecartesian,P,l.areabase):g.raiseError(g.core,"12052314141","run","JavaScriptRenderer~MSStackedCombiDY2D._call()",Error("FusionCharts.HC.Charts.js is required in order to define vizualization"))},[],c]}))}])});
